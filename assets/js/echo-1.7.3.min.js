/*
 echo-js v1.7.3 | (c) 2016 @toddmotto | https://github.com/toddmotto/echo */
(function(c,h){"function"===typeof define&&define.amd?define(function(){return h(c)}):"object"===typeof exports?module.exports=h:c.echo=h(c)})(this,function(c){var h,r,t,u,e={},n=function(){},m,v,w,p,k=function(){if(w||!m)clearTimeout(m),m=setTimeout(function(){e.render();m=null},v)};e.init=function(b){b=b||{};var d=b.offset||0,l=b.offsetVertical||d;d=b.offsetHorizontal||d;h=parseInt(b.offsetTop||l,10);r=parseInt(b.offsetBottom||l,10);t=parseInt(b.offsetLeft||d,10);u=parseInt(b.offsetRight||d,10);
v=parseInt(b.throttle||250,10);w=!1!==b.debounce;p=!!b.unload;n=b.callback||n;e.render();document.addEventListener?(c.addEventListener("scroll",k,!1),c.addEventListener("load",k,!1)):(c.attachEvent("onscroll",k),c.attachEvent("onload",k))};e.render=function(){for(var b=document.querySelectorAll("img[data-echo], [data-echo-background]"),d=b.length,l,a,x={l:0-t,t:0-h,b:(c.innerHeight||document.documentElement.clientHeight)+r,r:(c.innerWidth||document.documentElement.clientWidth)+u},q=0;q<d;q++){a=b[q];
var f=a;var g=x;null===f.offsetParent?g=!1:(f=f.getBoundingClientRect(),g=f.right>=g.l&&f.bottom>=g.t&&f.left<=g.r&&f.top<=g.b);g?(p&&a.setAttribute("data-echo-placeholder",a.src),null!==a.getAttribute("data-echo-background")?a.style.backgroundImage="url("+a.getAttribute("data-echo-background")+")":a.src=a.getAttribute("data-echo"),p||(a.removeAttribute("data-echo"),a.removeAttribute("data-echo-background")),n(a,"load")):p&&(l=a.getAttribute("data-echo-placeholder"))&&(null!==a.getAttribute("data-echo-background")?
a.style.backgroundImage="url("+l+")":a.src=l,a.removeAttribute("data-echo-placeholder"),n(a,"unload"))}d||e.detach()};e.detach=function(){document.removeEventListener?c.removeEventListener("scroll",k):c.detachEvent("onscroll",k);clearTimeout(m)};return e});
